<!--pages/exposure-board/exposure-board.wxml-->
<view class="eb-page">
  <!-- 说明横幅 -->
  <view class="eb-warning">
    <text class="eb-warning-icon iconfont icon-tishixinxi"></text>
    <text class="eb-warning-text">以下企业/用户因违规行为被平台核实并曝光，请注意交易风险。信息由平台审核后发布。</text>
  </view>

  <!-- Tab筛选 -->
  <view class="eb-tab-wrap">
    <view class="eb-tabs">
      <view class="eb-tab {{currentTab === index ? 'eb-tab-active' : ''}}"
            wx:for="{{tabs}}" wx:key="index"
            data-index="{{index}}" bindtap="onTabChange">
        <text>{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 曝光列表 -->
  <view class="eb-list-wrap">
    <view class="eb-card" wx:for="{{list}}" wx:key="id"
          wx:if="{{currentTab === 0 || item.type === tabs[currentTab]}}"
          data-id="{{item.id}}" bindtap="onTapCard">
      <!-- 头部 -->
      <view class="eb-card-header">
        <view class="text-avatar text-avatar-sm" style="background-color: {{item.avatarColor}};">{{item.avatarText}}</view>
        <view class="eb-header-info">
          <text class="eb-target">{{item.company}}{{item.company && item.contact ? ' / ' : ''}}{{item.contact}}</text>
          <text class="eb-type-badge">{{item.type}}</text>
        </view>
      </view>
      <!-- 详情 -->
      <view class="eb-detail">
        <view class="eb-detail-row" wx:if="{{item.amount}}">
          <text class="eb-dl">欠款金额</text>
          <text class="eb-dv text-cta font-medium">{{item.amount}}</text>
        </view>
      </view>
      <!-- 描述 -->
      <text class="eb-desc">{{item.reason}}</text>
      <!-- 图片 -->
      <view class="img-grid img-count-{{item.images.length}}" wx:if="{{item.images && item.images.length > 0}}">
        <view class="img-grid-item" wx:for="{{item.images}}" wx:for-item="img" wx:key="*this">
          <image class="img-grid-img" src="{{img}}" mode="aspectFill" data-urls="{{item.images}}" data-current="{{img}}" catchtap="onPreviewImage" />
        </view>
      </view>
      <!-- 底部 -->
      <view class="eb-bottom">
        <text class="eb-bottom-date">{{item.date}}</text>
        <view class="eb-actions">
          <view class="eb-action">
            <text class="eb-action-icon iconfont icon-pinglun"></text>
            <text class="eb-action-text">{{item.comments}}</text>
          </view>
          <view class="eb-action">
            <text class="eb-action-icon iconfont icon-fenxiang1"></text>
            <text class="eb-action-text">分享</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 悬浮发布按钮 -->
  <view class="eb-fab" bindtap="onPublishExposure">
    <text class="eb-fab-icon">+</text>
  </view>
</view>
