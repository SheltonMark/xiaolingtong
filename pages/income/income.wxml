<!--pages/income/income.wxml-->
<view class="inc-page">
  <!-- 月度统计 -->
  <view class="inc-month-card">
    <view class="month-nav">
      <text class="month-arrow" bindtap="onPrevMonth">‹</text>
      <text class="month-text">{{currentMonth}}</text>
      <text class="month-arrow" bindtap="onNextMonth">›</text>
    </view>
    <view class="month-stats">
      <view class="month-stat">
        <text class="month-val text-fresh">¥{{monthIncome}}</text>
        <text class="month-label">本月收入</text>
      </view>
      <view class="month-stat">
        <text class="month-val text-rose">¥{{monthWithdraw}}</text>
        <text class="month-label">本月提现</text>
      </view>
      <view class="month-stat">
        <text class="month-val text-primary">{{monthOrders}}</text>
        <text class="month-label">完成订单</text>
      </view>
    </view>
  </view>

  <!-- Tab -->
  <view class="inc-tab-wrap">
    <view class="inc-tabs">
      <view class="inc-tab {{currentTab === index ? 'inc-tab-active' : ''}}"
            wx:for="{{tabs}}" wx:key="index"
            data-index="{{index}}" bindtap="onTabChange">
        <text>{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 明细列表 -->
  <view class="inc-list-wrap">
    <block wx:for="{{groups}}" wx:key="date">
      <view class="inc-date-header">
        <text class="inc-date">{{item.date}}</text>
      </view>
      <view class="inc-item" wx:for="{{item.items}}" wx:for-item="rec" wx:key="id">
        <view class="inc-icon-wrap {{rec.type === 'income' ? 'inc-icon-green' : 'inc-icon-rose'}}">
          <text class="inc-icon">{{rec.type === 'income' ? '+' : '↓'}}</text>
        </view>
        <view class="inc-info">
          <text class="inc-name">{{rec.title}}</text>
          <text class="inc-desc">{{rec.desc}}</text>
          <text class="inc-detail" wx:if="{{rec.detail}}">{{rec.detail}}</text>
        </view>
        <text class="inc-amount {{rec.type === 'income' ? 'text-fresh' : 'text-rose'}}">{{rec.amount}}</text>
      </view>
    </block>
  </view>
</view>
