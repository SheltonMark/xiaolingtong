<!--pages/checkin/checkin.wxml-->
<view class="ci-page">
  <!-- å·¥ä½œä¿¡æ¯ -->
  <view class="ci-card">
    <view class="ci-job-header">
      <view class="ci-avatar">ğŸ­</view>
      <view class="ci-job-info">
        <text class="ci-company">{{jobInfo.company}}</text>
        <text class="ci-date">{{jobInfo.date}} Â· {{jobInfo.time}}</text>
      </view>
    </view>
    <view class="ci-stats">
      <view class="ci-stat">
        <text class="ci-stat-val">{{jobInfo.total}}</text>
        <text class="ci-stat-label">åº”åˆ°</text>
      </view>
      <view class="ci-stat">
        <text class="ci-stat-val text-fresh">{{jobInfo.checkedIn}}</text>
        <text class="ci-stat-label">å·²ç­¾åˆ°</text>
      </view>
      <view class="ci-stat">
        <text class="ci-stat-val text-rose">{{jobInfo.notCheckedIn}}</text>
        <text class="ci-stat-label">æœªç­¾åˆ°</text>
      </view>
    </view>
  </view>

  <!-- GPS åŒºåŸŸ -->
  <view class="ci-card">
    <view class="gps-area">
      <view class="gps-circle">
        <text class="gps-icon">ğŸ“</text>
        <text class="gps-dist">{{distance}}m</text>
      </view>
      <text class="gps-hint">è·å·¥å‚{{distance}}mï¼ˆéœ€åœ¨{{maxDistance}}mèŒƒå›´å†…ï¼‰</text>
    </view>
    <button class="btn btn-fresh" bindtap="onCheckin">ç«‹å³ç­¾åˆ°</button>
  </view>

  <!-- ç­¾åˆ°åˆ—è¡¨ -->
  <view class="ci-card">
    <text class="card-title">ç­¾åˆ°è®°å½•</text>
    <view class="worker-list">
      <view class="worker-row" wx:for="{{workers}}" wx:key="id">
        <view class="worker-left">
          <view class="worker-avatar">ğŸ‘·</view>
          <text class="worker-name">{{item.name}}</text>
        </view>
        <view class="worker-right">
          <text class="worker-time" wx:if="{{item.time}}">{{item.time}}</text>
          <text class="worker-status status-{{item.status}}">{{item.statusText}}</text>
          <text class="manual-btn" wx:if="{{item.status === 'absent'}}"
                data-id="{{item.id}}" bindtap="onManualCheckin">æ‰‹åŠ¨ç­¾åˆ°</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨ -->
  <view class="ci-bottom">
    <button class="btn btn-fresh" bindtap="onConfirmStart">ç¡®è®¤å¼€å·¥</button>
  </view>
</view>
