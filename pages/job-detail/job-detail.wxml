<!--pages/job-detail/job-detail.wxml-->
<view class="jd-page">
  <!-- ç°åœºå›¾ç‰‡ -->
  <swiper class="jd-swiper" wx:if="{{job.images && job.images.length > 0}}"
          indicator-dots autoplay circular bindchange="onSwiperChange">
    <swiper-item wx:for="{{job.images}}" wx:key="*this">
      <image src="{{item}}" mode="aspectFill" class="jd-swiper-img" />
    </swiper-item>
  </swiper>
  <view class="swiper-counter" wx:if="{{job.images && job.images.length > 0}}">{{swiperCurrent + 1}}/{{job.images.length}}</view>

  <!-- æ ¸å¿ƒä¿¡æ¯ -->
  <view class="salary-section">
    <view class="salary-row">
      <text class="salary-big text-cta">{{job.salary}}</text>
      <text class="salary-unit text-cta">{{job.salaryUnit}}</text>
      <text class="urgent-badge" wx:if="{{job.urgent}}">æ€¥æ‹›</text>
    </view>
    <text class="jd-title">{{job.title}} Â· éœ€{{job.need}}äºº</text>
    <view class="location-row">
      <text class="loc-icon">ğŸ“</text>
      <text class="loc-text">{{job.location}} Â· è·æ‚¨{{job.distance}}</text>
    </view>
  </view>

  <!-- å·¥ä½œè¯¦æƒ… -->
  <view class="detail-card">
    <view class="card-header-row">
      <text class="card-icon">ğŸ“‹</text>
      <text class="card-label">å·¥ä½œè¯¦æƒ…</text>
    </view>
    <view class="detail-list">
      <view class="detail-row">
        <text class="dl">å·¥ç§</text><text class="dv">{{job.title}}</text>
      </view>
      <view class="detail-row">
        <text class="dl">ç»“ç®—æ–¹å¼</text><text class="dv">{{job.salaryType}}</text>
      </view>
      <view class="detail-row">
        <text class="dl">å·¥ä½œæ—¥æœŸ</text><text class="dv">{{job.dateRange}}</text>
      </view>
      <view class="detail-row">
        <text class="dl">å·¥ä½œæ—¶é—´</text><text class="dv">{{job.hours}}</text>
      </view>
      <view class="detail-row">
        <text class="dl">å·¥ä½œå†…å®¹</text><text class="dv">{{job.description}}</text>
      </view>
      <view class="detail-row">
        <text class="dl">æŠ¥åäººæ•°</text>
        <text class="dv"><text class="text-cta font-semibold">{{job.applied}}</text> / {{job.total}}äºº</text>
      </view>
    </view>
  </view>

  <!-- ç¦åˆ©æ ‡ç­¾ -->
  <view class="detail-card">
    <text class="card-label">ç¦åˆ©å¾…é‡</text>
    <view class="tags-wrap">
      <text class="benefit-tag benefit-{{item.color || 'green'}}" wx:for="{{job.benefits}}" wx:key="label">{{item.label}}</text>
    </view>
  </view>

  <!-- æ‹›å·¥ä¼ä¸š -->
  <view class="detail-card">
    <view class="card-header-row">
      <text class="card-icon">ğŸ¢</text>
      <text class="card-label">æ‹›å·¥ä¼ä¸š</text>
    </view>
    <view class="company-row">
      <image class="comp-avatar-img" src="{{job.company.avatar || 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=80&h=80&fit=crop'}}" mode="aspectFill" />
      <view class="comp-info">
        <view class="comp-name-row">
          <text class="comp-name">{{job.company.name}}</text>
          <text class="cert-badge" wx:if="{{job.company.verified}}">å·²è®¤è¯</text>
        </view>
        <text class="comp-credit">ä¿¡ç”¨åˆ† <text class="text-cta font-semibold">{{job.company.creditScore}}</text> Â· {{job.location}}</text>
      </view>
    </view>
    <view class="contact-list">
      <view class="contact-row">
        <text class="contact-label">è”ç³»äºº</text>
        <text class="contact-value">{{job.company.contact}}</text>
      </view>
      <view class="contact-row">
        <text class="contact-label">è”ç³»ç”µè¯</text>
        <text class="contact-value text-primary font-medium" bindtap="onCallPhone">{{job.company.phone}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŠ¥å -->
  <view class="apply-wrap">
    <button class="btn btn-cta apply-btn" bindtap="onApply">
      <text>âœï¸</text>
      <text>ç«‹å³æŠ¥å</text>
    </button>
    <text class="apply-hint">æŠ¥ååç­‰å¾…å¹³å°åˆ†é…ï¼Œå¼€å·¥å‰ä¸€å¤©éœ€ç¡®è®¤å‡ºå‹¤</text>
  </view>
</view>
