<!--pages/work-record/work-record.wxml-->
<view class="wr-page">
  <!-- å½“å‰çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card">
    <view class="sc-top">
      <text class="sc-company">{{status.company}} Â· {{status.jobType}}</text>
      <text class="sc-badge">è¿›è¡Œä¸­</text>
    </view>
    <view class="sc-hours">
      <text class="sc-hours-big">{{status.hoursToday}}</text>
      <text class="sc-hours-unit">å°æ—¶</text>
    </view>
    <text class="sc-sub">ä»Šæ—¥å·²å·¥ä½œæ—¶é•¿ Â· {{status.startTime}} å¼€å§‹</text>
    <view class="sc-stats">
      <view class="sc-stat">
        <text class="sc-stat-val">ä»Šæ—¥å‡ºå‹¤ï¼š{{status.todayAttend}}äºº</text>
      </view>
      <view class="sc-stat">
        <text class="sc-stat-val">å¼‚å¸¸ï¼š{{status.todayAnomaly}}äºº</text>
      </view>
      <view class="sc-stat">
        <text class="sc-stat-val">é¢„è®¡æ”¶å·¥ï¼š{{status.estimateEnd}}</text>
      </view>
    </view>
  </view>

  <!-- ç°åœºæ‹ç…§ -->
  <view class="wr-card">
    <view class="card-header-row">
      <text class="card-title">ğŸ“· ç°åœºæ‹ç…§ï¼ˆæ¯2å°æ—¶ï¼‰</text>
    </view>
    <view class="photo-list">
      <!-- å·²ä¸Šä¼  -->
      <view class="photo-item photo-done" wx:for="{{photoRecords}}" wx:key="id" wx:if="{{item.status === 'done'}}">
        <image class="photo-thumb" src="{{item.image}}" mode="aspectFill" />
        <view class="photo-info">
          <text class="photo-time">{{item.timeRange}}</text>
          <text class="photo-status text-fresh">å·²ä¸Šä¼  Â· {{item.uploadTime}}</text>
        </view>
        <text class="photo-check">âœ“</text>
      </view>
      <!-- å¾…ä¸Šä¼  -->
      <view class="photo-item photo-pending" wx:for="{{photoRecords}}" wx:key="id" wx:if="{{item.status === 'pending'}}">
        <view class="photo-thumb-placeholder">
          <text class="photo-camera-icon">ğŸ“·</text>
        </view>
        <view class="photo-info">
          <text class="photo-time">{{item.timeRange}}</text>
          <text class="photo-status text-warm">å¾…ä¸Šä¼ </text>
        </view>
        <button class="photo-btn" data-id="{{item.id}}" bindtap="onTakePhoto">æ‹ç…§</button>
      </view>
    </view>
  </view>

  <!-- å¼‚å¸¸è®°å½• -->
  <view class="wr-card">
    <view class="card-header-row">
      <text class="card-title">âš ï¸ å¼‚å¸¸è®°å½•</text>
    </view>
    <view class="anomaly-list" wx:if="{{anomalies.length > 0}}">
      <view class="anomaly-item" wx:for="{{anomalies}}" wx:key="id">
        <view class="anomaly-top">
          <text class="anomaly-name">{{item.name}} Â· {{item.type}}</text>
          <text class="anomaly-time">{{item.time}}</text>
        </view>
        <text class="anomaly-desc">{{item.desc}}</text>
      </view>
    </view>
    <button class="record-anomaly-btn" bindtap="onRecordAnomaly">
      <text>+ è®°å½•å¼‚å¸¸</text>
    </button>
  </view>

  <!-- åº•éƒ¨ -->
  <view class="wr-bottom">
    <button class="btn btn-rose" bindtap="onFinishWork">ç¡®è®¤æ”¶å·¥</button>
    <text class="wr-hint">æ”¶å·¥åå°†ç”Ÿæˆç»“ç®—å•ï¼Œè¯·ç¡®ä¿æ‰€æœ‰å·¥æ—¶è®°å½•å‡†ç¡®</text>
  </view>
</view>
