<!--pages/chat/chat.wxml-->
<view class="chat-page">
  <!-- èŠå¤©æ¶ˆæ¯åŒº -->
  <scroll-view scroll-y class="chat-body" scroll-into-view="{{scrollToView}}">
    <!-- æ—¶é—´æ ‡è®° -->
    <view class="time-mark"><text>ä»Šå¤© 14:30</text></view>

    <!-- ç³»ç»Ÿæç¤º -->
    <view class="sys-tip"><text class="sys-tip-text">ä½ æ­£åœ¨å’¨è¯¢ã€Œä¿æ¸©æ¯3000ä¸ªé‡‡è´­ã€</text></view>

    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <block wx:for="{{messages}}" wx:key="id">
      <!-- å¯¹æ–¹æ¶ˆæ¯ -->
      <view class="msg-row msg-left" wx:if="{{item.from === 'other'}}" id="msg-{{item.id}}">
        <view class="msg-avatar-wrap">
          <view class="text-avatar text-avatar-md" style="background-color: #F97316;">å¼ </view>
        </view>
        <view class="msg-bubble-wrap">
          <view class="bubble bubble-left" wx:if="{{item.text}}">
            <text>{{item.text}}</text>
          </view>
          <image wx:if="{{item.image}}" src="{{item.image}}" mode="widthFix" class="msg-image" />
          <text class="msg-time-text">{{item.time}}</text>
        </view>
      </view>

      <!-- æˆ‘çš„æ¶ˆæ¯ -->
      <view class="msg-row msg-right" wx:if="{{item.from === 'me'}}" id="msg-{{item.id}}">
        <view class="msg-bubble-wrap msg-bubble-right">
          <view class="bubble bubble-right" wx:if="{{item.text}}">
            <text>{{item.text}}</text>
          </view>
          <text class="msg-time-text msg-time-right">{{item.time}}</text>
        </view>
        <view class="msg-avatar-wrap">
          <view class="text-avatar text-avatar-md" style="background-color: #3B82F6;">é‘«</view>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- åº•éƒ¨è¾“å…¥æ  -->
  <view class="chat-bottom">
    <view class="chat-input-row">
      <text class="chat-tool-btn">ğŸ¤</text>
      <input class="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯..." bindinput="onMsgInput" value="{{inputText}}" confirm-type="send" bindconfirm="onSend" />
      <text class="chat-tool-btn" bindtap="onChooseImage">ğŸ–¼</text>
      <view class="chat-send-btn" bindtap="onSend">
        <text class="send-arrow">â†‘</text>
      </view>
    </view>
  </view>
</view>
