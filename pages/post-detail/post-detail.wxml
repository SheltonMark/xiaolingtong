<!--pages/post-detail/post-detail.wxml-->
<view class="detail-page">
  <!-- 图片轮播 -->
  <view class="swiper-wrap" wx:if="{{detail.images.length > 0}}">
    <swiper class="image-swiper"
            indicator-dots autoplay circular
            bindchange="onSwiperChange">
      <swiper-item wx:for="{{detail.images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" class="swiper-img" />
      </swiper-item>
    </swiper>
    <view class="swiper-counter">{{swiperCurrent + 1}}/{{detail.images.length}}</view>
  </view>

  <!-- 基本信息 -->
  <view class="title-section">
    <view class="tag-row">
      <text class="tag tag-blue">{{detail.typeText}}</text>
      <text class="tag tag-amber">{{detail.industry}}</text>
    </view>
    <text class="detail-title">{{detail.title}}</text>
    <view class="title-meta">
      <text class="meta-text">发布时间：{{detail.publishTime}}</text>
      <text class="meta-text">有效期至：{{detail.expireTime}}</text>
    </view>
  </view>

  <!-- 详细信息 -->
  <view class="info-section">
    <view class="section-header-row">
      <text class="section-icon iconfont icon-xiangqing"></text>
      <text class="section-label">详细信息</text>
    </view>
    <view class="info-list">
      <view class="info-row" wx:for="{{detail.fields}}" wx:key="label">
        <text class="info-label">{{item.label}}</text>
        <text class="info-value {{item.highlight ? 'text-cta font-semibold' : ''}} {{item.bold ? 'font-medium' : ''}}">{{item.value}}</text>
      </view>
    </view>
    <view class="desc-area" wx:if="{{detail.desc}}">
      <text class="desc-label">补充描述</text>
      <text class="desc-text">{{detail.desc}}</text>
    </view>
  </view>

  <!-- 发布者信息 -->
  <view class="publisher-section">
    <view class="section-header-row">
      <text class="section-icon iconfont icon-gongsi"></text>
      <text class="section-label">发布者</text>
    </view>
    <view class="publisher-info">
      <view class="text-avatar" style="width:88rpx;height:88rpx;font-size:32rpx;background-color:#3B82F6;">{{detail.avatarText}}</view>
      <view class="pub-detail">
        <view class="pub-name-row">
          <text class="pub-name">{{detail.location}} · {{detail.certText}}</text>
          <text class="cert-badge">已认证</text>
        </view>
        <text class="pub-industry">{{detail.industry}} · 发布信息 {{detail.postCount || 12}} 条</text>
      </view>
    </view>
  </view>

  <!-- 底部操作 -->
  <view class="bottom-actions">
    <view class="fav-btn" bindtap="onToggleFav">
      <text class="iconfont icon-xingxing {{isFav ? 'fav-active' : 'fav-inactive'}}"></text>
    </view>
    <button class="bottom-btn btn-chat" bindtap="onChat">
      <text class="bottom-btn-icon iconfont icon-xiaoxi"></text>
      <text>在线聊</text>
    </button>
    <button class="bottom-btn btn-contact" bindtap="onUnlockContact" wx:if="{{!contactUnlocked}}">
      <text class="bottom-btn-icon iconfont icon-jiesuo"></text>
      <text>查看联系方式</text>
    </button>
    <button class="bottom-btn btn-contact" bindtap="onCallPhone" wx:else>
      <text class="bottom-btn-icon iconfont icon-shouji"></text>
      <text>立即联系</text>
    </button>
  </view>
</view>
