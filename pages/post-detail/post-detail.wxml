<!--pages/post-detail/post-detail.wxml-->
<view class="detail-page">
  <!-- å›¾ç‰‡è½®æ’­ -->
  <swiper class="image-swiper" wx:if="{{detail.images.length > 0}}"
          indicator-dots autoplay circular>
    <swiper-item wx:for="{{detail.images}}" wx:key="*this">
      <image src="{{item}}" mode="aspectFill" class="swiper-img" />
    </swiper-item>
  </swiper>

  <!-- æ ‡é¢˜åŒº -->
  <view class="title-section">
    <text class="detail-title">{{detail.title}}</text>
    <view class="title-meta">
      <text class="meta-text">{{detail.industry}}</text>
      <text class="meta-dot">Â·</text>
      <text class="meta-text">å‘å¸ƒäº {{detail.publishTime}}</text>
      <text class="meta-dot">Â·</text>
      <text class="meta-text">æœ‰æ•ˆæœŸè‡³ {{detail.expireTime}}</text>
    </view>
  </view>

  <!-- å‘å¸ƒè€…ä¿¡æ¯ -->
  <view class="publisher-section">
    <view class="publisher-left">
      <view class="pub-avatar" style="background-color: {{detail.avatarBg}};">
        <text style="color: {{detail.avatarColor}};" class="pub-avatar-text">{{detail.avatarText}}</text>
      </view>
      <view class="pub-info">
        <text class="pub-name">{{detail.location}} Â· {{detail.certText}}</text>
        <text class="pub-industry">{{detail.industry}}</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯ -->
  <view class="info-section">
    <text class="section-label">è¯¦ç»†ä¿¡æ¯</text>
    <view class="info-list">
      <view class="info-row" wx:for="{{detail.fields}}" wx:key="label">
        <text class="info-label">{{item.label}}</text>
        <text class="info-value">{{item.value}}</text>
      </view>
    </view>
  </view>

  <!-- è”ç³»æ–¹å¼ -->
  <view class="contact-section">
    <text class="section-label">è”ç³»æ–¹å¼</text>
    <!-- æœªè§£é” -->
    <view class="contact-locked" wx:if="{{!contactUnlocked}}">
      <text class="lock-icon">ğŸ”’</text>
      <text class="lock-title">æŸ¥çœ‹è”ç³»æ–¹å¼</text>
      <text class="lock-desc">æ¶ˆè€—1æ¬¡æŸ¥çœ‹æœºä¼š / ä¼šå‘˜å…è´¹æŸ¥çœ‹</text>
      <button class="btn btn-cta" style="margin-top: 24rpx;" bindtap="onUnlockContact">ç«‹å³æŸ¥çœ‹</button>
    </view>
    <!-- å·²è§£é” -->
    <view class="contact-unlocked" wx:else>
      <view class="contact-row">
        <text class="contact-label">è”ç³»äºº</text>
        <text class="contact-value">{{contactInfo.name}}</text>
      </view>
      <view class="contact-row">
        <text class="contact-label">ç”µè¯</text>
        <text class="contact-value text-primary" bindtap="onCallPhone">{{contactInfo.phone}}</text>
      </view>
      <view class="contact-row" wx:if="{{contactInfo.wechat}}">
        <text class="contact-label">å¾®ä¿¡</text>
        <text class="contact-value">{{contactInfo.wechat}}</text>
        <text class="copy-btn" bindtap="onCopyWechat">å¤åˆ¶</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="bottom-actions">
    <view class="action-item" bindtap="onShare">
      <text class="action-icon">ğŸ“¤</text>
      <text class="action-text">åˆ†äº«</text>
    </view>
    <view class="action-item" bindtap="onReport">
      <text class="action-icon">âš ï¸</text>
      <text class="action-text">ä¸¾æŠ¥</text>
    </view>
    <button class="btn btn-primary" style="flex:1;margin-left:24rpx;" bindtap="onUnlockContact" wx:if="{{!contactUnlocked}}">æŸ¥çœ‹è”ç³»æ–¹å¼</button>
    <button class="btn btn-primary" style="flex:1;margin-left:24rpx;" bindtap="onCallPhone" wx:else>ç«‹å³è”ç³»</button>
  </view>
</view>
